[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log
logfile_maxbytes=50MB
logfile_backups=10
loglevel=info

[program:postgresql]
command=/usr/lib/postgresql/12/bin/postgres -D /var/lib/postgresql/data
user=appuser
autostart=true
autorestart=true

[program:redis]
command=redis-server --requirepass secure_password
autostart=true
autorestart=true

[program:mosquitto]
command=mosquitto -c /etc/mosquitto/mosquitto.conf
autostart=true
autorestart=true

[program:stream-manager]
command=python3 /app/stream-manager/main.py
autostart=true
autorestart=true

[program:inference-engine]
command=python3 /app/inference-engine/main.py
autostart=true
autorestart=true

[program:api-gateway]
command=python3 /app/api-gateway/main.py
autostart=true
autorestart=true

[program:admin-panel]
command=nginx -g "daemon off;"
autostart=true
autorestart=true